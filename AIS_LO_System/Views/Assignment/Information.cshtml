@model Assignment
@{
    ViewData["Title"] = "Assignment Information";
}

<link rel="stylesheet" href="~/css/assignment-information.css" />

<div class="assignment-info-page">

    <div class="breadcrumb">
        <a asp-controller="CourseDashboard"
           asp-action="Index"
           asp-route-courseCode="@ViewBag.CourseCode"
           asp-route-year="@ViewBag.Year"
           asp-route-trimester="@ViewBag.Trimester">
            @ViewBag.CourseCode @ViewBag.CourseTitle
        </a>

        <span>/</span>

        <a asp-controller="Assignment"
           asp-action="Index"
           asp-route-assessmentName="@ViewBag.AssessmentName"
           asp-route-courseCode="@ViewBag.CourseCode"
           asp-route-courseTitle="@ViewBag.CourseTitle"
           asp-route-year="@ViewBag.Year"
           asp-route-trimester="@ViewBag.Trimester">
            @ViewBag.AssessmentName
        </a>

        <span>/</span>
        <span>Assignment Information</span>
    </div>

    <div class="info-header">
        <h1>@ViewBag.AssessmentName</h1>
    </div>

    <div class="assignment-preview">
        @{
            var latest = Model.Files
            .OrderByDescending(f => f.VersionNumber)
            .FirstOrDefault();
        }

        @if (latest != null)
        {
            <iframe src="@latest.FilePath" width="100%" height="700px"></iframe>
            <p class="version-info">
                Version @latest.VersionNumber —
                Uploaded @latest.UploadDate.ToShortDateString()
            </p>
        }
        else
        {
            <p>No assignment uploaded yet.</p>
        }
    </div>

    <div class="upload-card">
        <form asp-action="UploadAssignment"
              method="post"
              enctype="multipart/form-data">

            <input type="hidden" name="assignmentId" value="@Model.Id" />

            <input type="file" name="file" accept=".pdf" required />
            <button class="upload-btn">Upload New Version</button>
        </form>
    </div>

</div>
